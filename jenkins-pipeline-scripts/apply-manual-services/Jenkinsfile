def changedFilePathsArray = []
def atcost = []
def nutanix = []


pipeline{
    agent any
    stages{
        stage('Git Checkout'){
           steps{
            checkout([
                $class: 'GitSCM',
                branches: [[name: '*/407-test-changed-files-from-CWF']],
                extensions: [],
                userRemoteConfigs: [[
                    credentialsId: '6e8e3064-2329-46fe-bfa3-b1c54f17e885',
                    url: 'https://github.com/Calance-US/calance-services-helm-values.git'
                ]]
            ])
           }
        }
        stage('Find the cluster to which Changed Files will be applied'){
            
                
                steps{
                    script{
                        String changedFilePaths = env.CHANGED_FILES
                        
                        changedFilePathsArray = changedFilePaths.split(',').collect{it as String}
                        //println changedFilePathsArray
                        for (int i = 0; i < changedFilePathsArray.size(); i++){
                            if (changedFilePathsArray[i].contains('jenkins')){
                                nutanix.add(changedFilePathsArray[i])
                            } else{
                                atcost.add(changedFilePathsArray[i])
                            }
                        }
                        println nutanix
                        println atcost
                    }
                }
                
            
                
                
            
            
        }
        
    }
}
